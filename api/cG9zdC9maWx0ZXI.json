{"title":"JS去重的十一种方式","date":"2018-07-01T11:46:13.000Z","slug":"filter","comments":true,"updated":"2019-04-08T00:54:42.319Z","content":"<blockquote>\n<p><code>一 利用ES6 Set去重（ES6中最常用）</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [] , <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, </span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>.from(<span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(arr))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr)); </span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], null, [] ]</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;,[]  === no</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>二 利用for嵌套for，然后splice去重（ES5中最常用）</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = i + <span class=\"number\">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(arr[i] === arr[j])&#123;</span><br><span class=\"line\">          arr.splice(j, <span class=\"number\">1</span>)</span><br><span class=\"line\">          j--</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr)); </span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], null, [] ]</span></span><br><span class=\"line\"><span class=\"comment\">// NaN &#123;&#125; [] ---no</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>三 利用indexOf去重</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = []</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (array.indexOf(arr[i]) === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">// NaN &#123;&#125; [] ---no</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>四 利用sort()</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  arr = arr.sort()</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = [arr[<span class=\"number\">0</span>]]</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(arr[i] !== arr[i<span class=\"number\">-1</span>])&#123;</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[ [], [], 1, NaN, NaN, &#123;&#125;, &#123;&#125;, 'cbhd', null, true, undefined ]</span></span><br><span class=\"line\"><span class=\"comment\">// NaN &#123;&#125; [] ---no  排序之后顺序变了</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>五 利用对象的属性不能相同的特点进行去重</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = []</span><br><span class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!obj[arr[i]])&#123;</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">      obj[arr[i]] = <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">      obj[arr[i]]++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, 'cbhd', &#123;&#125;, [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">//都去了，但是true 无论什么类型只有一个 true</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>六 利用includes</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error!'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> array = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!array.includes(arr[i]))&#123;</span><br><span class=\"line\">            array.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// [ 1, true, 'true', undefined, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;&#125;, []  未去重</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>七利用hasOwnProperty</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj=&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item,index,arr</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.hasOwnProperty(<span class=\"keyword\">typeof</span> item + item) ? <span class=\"literal\">false</span> : (obj[<span class=\"keyword\">typeof</span> item + item] = <span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [ 1, true, 'true', undefined, NaN, 'cbhd', &#123;&#125;, [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">//全部去重</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>利用hasOwnProperty 判断是否存在对象属性</p>\n</blockquote>\n<blockquote>\n<p><code>八利用filter</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj=&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item,index,arr</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arr.indexOf(item,<span class=\"number\">0</span>) === index</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, 'true', undefined, 'cbhd', &#123;&#125;, &#123;&#125;, [], [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;.[]未去重</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>九利用递归去重</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = arr</span><br><span class=\"line\">  <span class=\"keyword\">var</span> len = array.length</span><br><span class=\"line\">  array.sort(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a - b</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loop</span>(<span class=\"params\">index</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index &gt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (array[index] === array[index - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">        array.splice(index, <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      loop(index - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  loop(len - <span class=\"number\">1</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [ [], null, [],'true',1,true,1,NaN,'cbhd',&#123;&#125;,&#123;&#125;,true,NaN,undefined ]</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;.[],NaN,true未去重</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>十利用Map数据结构去重</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> map = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\">  <span class=\"keyword\">let</span> array = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>()</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i&lt; arr.length; i++)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(map.has(arr[i]))&#123;</span><br><span class=\"line\">      map.set(arr[i], <span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">      map.set(arr[i], <span class=\"literal\">false</span>)</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [ 1, true, 'true', undefined, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;.[]未去重</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>​￼​创建一个空Map数据结构，遍历需要去重的数组，把数组的每一个元素作为key存到Map中。由于Map中不会出现相同的key值，所以最终得到的就是去重后的结果。<br><code>十一利用reduce+includes</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr.reduce(<span class=\"function\">(<span class=\"params\">prev, cur</span>) =&gt;</span> prev.includes(cur) ? prev : [...prev, cur], [])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [ 1, true, 'true', undefined, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;.[]未去重</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr));</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n","prev":{"title":"Generator(生成器) 异步编程解决方案","slug":"Generator"},"next":{"title":"Eslint","slug":"Eslint"},"link":"https://annwvn.github.io/yangliu.github.io/post/filter/"}