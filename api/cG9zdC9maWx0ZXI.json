{"title":"JS去重的十一种方式","date":"2018-07-01T11:46:13.000Z","slug":"filter","comments":true,"updated":"2019-03-31T12:42:16.700Z","content":"<blockquote>\n<p><code>一 利用ES6 Set去重（ES6中最常用）</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [] , <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, </span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`Array.from(new Set(arr))`</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr)); </span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], null, [] ]</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;,[]  === no</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>二 利用for嵌套for，然后splice去重（ES5中最常用）</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = i + <span class=\"number\">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(arr[i] === arr[j])&#123;</span><br><span class=\"line\">          arr.splice(j, <span class=\"number\">1</span>)</span><br><span class=\"line\">          j--</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr)); </span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], null, [] ]</span></span><br><span class=\"line\"><span class=\"comment\">// NaN &#123;&#125; [] ---no</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>三 利用indexOf去重</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = []</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (array.indexOf(arr[i]) === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, NaN, 'cbhd', &#123;&#125;, &#123;&#125;, [], [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">// NaN &#123;&#125; [] ---no</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>四 利用sort()</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  arr = arr.sort()</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = [arr[<span class=\"number\">0</span>]]</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(arr[i] !== arr[i<span class=\"number\">-1</span>])&#123;</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[ [], [], 1, NaN, NaN, &#123;&#125;, &#123;&#125;, 'cbhd', null, true, undefined ]</span></span><br><span class=\"line\"><span class=\"comment\">// NaN &#123;&#125; [] ---no  排序之后顺序变了</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p><code>五 利用对象的属性不能相同的特点进行去重</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"string\">'true'</span>, <span class=\"string\">'true'</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, <span class=\"literal\">NaN</span>, <span class=\"literal\">NaN</span>, <span class=\"string\">'cbhd'</span>, <span class=\"string\">'cbhd'</span>, &#123;&#125;, &#123;&#125;,</span><br><span class=\"line\">  [], [], <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"literal\">null</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"built_in\">Array</span>.isArray(arr))&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'type error'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> array = []</span><br><span class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!obj[arr[i]])&#123;</span><br><span class=\"line\">      array.push(arr[i])</span><br><span class=\"line\">      obj[arr[i]] = <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">      obj[arr[i]]++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> array</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(unique(arr))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[ 1, true, undefined, NaN, 'cbhd', &#123;&#125;, [], null ]</span></span><br><span class=\"line\"><span class=\"comment\">//都去了，但是true 无论什么类型只有一个 true</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>六</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>七<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>八<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>九<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>十<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>十一<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n","prev":{"title":"Generator(生成器) 异步编程解决方案","slug":"Generator"},"next":{"title":"Eslint","slug":"Eslint"},"link":"https://annwvn.github.io/yangliu.github.io/post/filter/"}